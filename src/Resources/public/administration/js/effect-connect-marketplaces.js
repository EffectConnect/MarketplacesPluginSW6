(function(){"use strict";var e={};e.p="bundles/effectconnectmarketplaces/",window?.__sw__?.assetPath&&(e.p=window.__sw__.assetPath+"/bundles/effectconnectmarketplaces/"),function(){var e,t=JSON.parse('{"ec":{"global":{"save":"Opslaan","cancel":"Annuleren","edit":"Bewerk","delete":"Verwijderen","create":"Cre\xebren","successSaved":"Succesvol opgeslagen","trigger":"Uitvoeren","confirm":"Bevestigen","modules":{"main":{"label":"Effectconnect"},"log":{"label":"Logs","title":"EffectConnect Marketplaces - Logs","description":"Logs"},"connection":{"label":"Verbindingen","title":"EffectConnect Marketplaces - verbindingen","description":"Verbindingen"}}}}}'),n=JSON.parse('{"ec":{"global":{"save":"Save","cancel":"Cancel","edit":"Edit","delete":"Delete","create":"Create","successSaved":"Successfully saved","trigger":"Trigger","confirm":"Confirm","modules":{"main":{"label":"EffectConnect"},"log":{"label":"Logs","title":"EffectConnect Marketplaces - Logs","description":"Logs"},"connection":{"label":"Connections","title":"EffectConnect Marketplaces - Connections","description":"Connections"}}}}}');let l={id:"effectconnect-module",label:"EffectConnect",color:"#ff3d58",icon:"default-shopping-paper-bag-product",parent:"sw-extension",position:100};6.4>parseFloat((e=(e=Shopware.Context.app.config.version).replace(/\D/g,"")).substring(0,1)+"."+e.substring(1,e.length))&&delete l.parent,Shopware.Module.register("effectconnect-module",{type:"plugin",name:"effectconnect-module",title:"EffectConnect",description:"EffectConnect module",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"default-action-settings",entity:"integration",snippets:{"nl-NL":t,"en-GB":n},routes:{dummy:{component:{template:""},path:"effectconnect.log"}},navigation:[l]});var a=JSON.parse('{"ec":{"connection":{"overview":{"deleteConnection":"Verwijderen","textConfirmDelete":"Weet u zeker dat u deze verbinding wilt verwijderen?","textDeleteInfo":"Deze actie kan niet worden teruggedraaid."},"edit":{"general":"Algemeen","api":"API","catalogExport":"Catalogus exporteren","offerExport":"Offer exporteren","orderImport":"Order import","noSalesChannelsAvailable":"Geen sales channels beschikbaar","salesChannelHelpText":"Welk sales channel moet worden gebruikt","salesChannelLabel":"Sales channel","salesChannelPlaceholder":"Selecteer een sales channel","nameHelpText":"Alleen gebruikt voor interne referentie","nameLabel":"Naam","namePlaceholder":"Kies een interne naam ...","publicKeyHelpText":"Zoek uw public key in de API key management in EffectConnect.","publicKeyLabel":"Public key","publicKeyPlaceholder":"Vul de public key in ...","secretKeyHelpText":"Zoek uw secret key in de API key management in EffectConnect.","secretKeyLabel":"Secret key","secretKeyPlaceholder":"Vul de secret key in ...","scheduleHelpText":"Bepaalt of en wanneer het proces wordt uitgevoerd.","scheduleLabel":"Schedule","schedulePlaceholder":"Kies een aangepaste schedule ...","schedules":{"0":"uitgeschakeld","300":"elke 5 minuten","900":"elke 15 minuten","1800":"elke 30 minuten","3600":"elk uur","21600":"elke 6 uur","43200":"elke 12 uur","64800":"elke 18 uur","86400":"elke 24 uur"},"addLeadingZeroToEanLabel":"Voeg voorloopnul toe aan EAN","addLeadingZeroToEanHelpText":"Selecteer of de plugin automatisch een voorloopnul moet toevoegen aan een EAN die uit 12 tekens bestaat.","useSpecialPriceLabel":"Hanteer speciale prijs","useSpecialPriceHelpText":"Selecteer of het speciale prijskenmerk moet worden gebruikt bij het exporteren van de catalogus naar effectconnect. De oorspronkelijke prijs zal net zo goed worden ge\xc3\xabxporteerd, maar in dat geval als oorspronkelijke prijskenmerk.","useFallbackTranslationsLabel":"Gebruik fallback-vertalingen","useFallbackTranslationsHelpText":"Selecteer of de standaardtaal moet worden gebruikt wanneer een vertaalbare waarde niet in een van de andere talen wordt ingesteld bij het exporteren van de catalogus naar effectconnect.","useSalesChannelDefaultLanguageAsFirstFallbackLanguageLabel":"Gebruik de standaardtaal van het sales channel als eerste fallback-taal","useSalesChannelDefaultLanguageAsFirstFallbackLanguageHelpText":"Standaard wordt de standaardtaal van de systeemtalen gebruikt als fallback-taal. Indien ingeschakeld, wordt de standaardtaal van het sales channel eerst als fallback-taal gebruikt.","useSystemLanguagesLabel":"Gebruik systeemtalen","useSystemLanguagesHelpText":"Standaard worden de gedefinieerde talen in het sales channel gebruikt. Indien ingeschakeld, worden de systeemtalen gebruikt bij het exporteren van de catalogus naar effectconnect.","stockTypeHelpText":"Bepaalt welke voorraad moet worden gebruikt bij het bouwen van de export.","stockTypeLabel":"Voorraadtype","stockTypes":{"physicalStock":"Fysieke voorraad","salableStock":"Verkoopbare voorraad"},"paymentStatusLabel":"Betalingsstatus","paymentStatusHelpText":"Selecteer de betalingsstatus voor ge\xc3\xafmporteerde bestellingen.","paymentStatuses":{"paid":"Betaald","open":"Open"},"orderStatusLabel":"Bestelstatus","orderStatusHelpText":"Selecteer de bestelstatus voor ge\xc3\xafmporteerde bestellingen.","orderStatuses":{"open":"Open","in_progress":"Bezig"},"paymentMethodHelpText":"Selecteer de betaalmethode voor ge\xc3\xafmporteerde bestellingen.","paymentMethodLabel":"Betalingsmethode","paymentMethodPlaceholder":"Kies een betaal methode...","shippingMethodHelpText":"Selecteer de verzendmethode voor ge\xc3\xafmporteerde bestellingen.","shippingMethodLabel":"Verzendmethode","shippingMethodPlaceholder":"Kies een verzendmethode ...","triggerCatalogExportHelpText":"Activeert een export van een catalogus.","triggerCatalogExportLabel":"Trigger catalogus exporteren","scheduleInformationText":"Dit proces staat ingesteld op <strong>{current}</strong>.","taskTriggered":"Taak met succes geactiveerd.","apiCredentialsOK":"Referenties geldig","apiCredentialsNOK":"Referenties zijn niet geldig","triggerCatalogExport":"Trigger catalogus exporteren","customerSourceTypes":{"shipping":"Verzendadres","billing":"Factuuradres"},"shippingStatuses":{"shipped":"Verzonden","open":"Open","partially_shipped":"Gedeeltelijk Verzonden"},"shippingStatusLabel":"Verzendstatus","shippingStatusHelpText":"Selecteer de verzendstatus voor ge\xefmporteerde bestellingen.","createCustomerLabel":"Klanten aanmaken?","createCustomerHelpText":"Of klanten aangemaakt worden bij het importeren van een bestelling.","customerGroupLabel":"Klantgroep","customerGroupHelpText":"Welke klantengroep nieuw gecre\xeberde klanten behoren","customerSourceTypeLabel":"Type klantenbron","customerSourceTypeHelpText":"Van welke adresbron nieuw gemaakte klanten hun informatie uit halen","importExternallyFulfilledOrdersLabel":"Extern vervulde bestellingen importeren?","importExternallyFulfilledOrdersHelpText":"Of extern vervulde bestellingen geimporteerd moeten worden.","externalPaymentStatusLabel":"Betalingsstatus (extern vervulde bestelling)","externalPaymentStatusHelpText":"Welke betalingsstatus extern vervulde bestellingen hebben.","externalOrderStatusLabel":"Bestelstatus (extern vervulde bestelling)","externalOrderStatusHelpText":"Welke orderstatus extern vervulde bestellingen zullen hebben.","externalShippingStatusLabel":"Verzendstatus (extern vervulde bestelling)","externalShippingStatusHelpText":"Welke verzendstatus extern vervulde bestellingen zullen zijn.","testCredentials":"Test API-referenties"}}}}'),s=JSON.parse('{"ec":{"connection":{"overview":{"deleteConnection":"Delete","textConfirmDelete":"Are you sure you want to delete this connection?","textDeleteInfo":"This action cannot be reversed."},"edit":{"general":"General","api":"API","catalogExport":"Catalog export","offerExport":"Offer export","orderImport":"Order import","taskTriggered":"Task successfully triggered.","noSalesChannelsAvailable":"No sales channels available","scheduleInformationText":"This process is set as: <strong>{current}</strong>.","triggerCatalogExportHelpText":"Triggers a catalog export.","triggerCatalogExportLabel":"Trigger catalog export","salesChannelHelpText":"Which sales channel to be used","salesChannelLabel":"Sales channel","salesChannelPlaceholder":"Select a sales channel","nameHelpText":"Used for internal reference only","nameLabel":"Name","namePlaceholder":"Choose an internal name...","publicKeyHelpText":"Find your public key in the API Key Management section in EffectConnect.","publicKeyLabel":"Public key","publicKeyPlaceholder":"Fill in the public key...","secretKeyHelpText":"Find your secret key in the API Key Management section in EffectConnect.","secretKeyLabel":"Secret key","secretKeyPlaceholder":"Fill in the secret key...","scheduleHelpText":"Determines if and when the process will run.","scheduleLabel":"Schedule","schedulePlaceholder":"Choose a custom schedule...","schedules":{"0":"disabled","300":"every 5 minutes","900":"every 15 minutes","1800":"every 30 minutes","3600":"every hour","21600":"every 6 hours","43200":"every 12 hours","64800":"every 18 hours","86400":"every 24 hours"},"addLeadingZeroToEanLabel":"Add leading zero to EAN","addLeadingZeroToEanHelpText":"Select whether the plugin should automatically add a leading zero to an EAN that consists of 12 characters.","useSpecialPriceLabel":"Use special price","useSpecialPriceHelpText":"Select whether the special price attribute should be used when exporting the catalog to EffectConnect. The original price will just as well be exported, but in that case as original price attribute.","useFallbackTranslationsLabel":"Use fallback translations","useFallbackTranslationsHelpText":"Select whether the default language should be used when a translatable value is not set in one of the other languages when exporting the catalog to EffectConnect.","useSalesChannelDefaultLanguageAsFirstFallbackLanguageLabel":"Use sales channel default language as first fallback language","useSalesChannelDefaultLanguageAsFirstFallbackLanguageHelpText":"By default the default language of the system languages is used as fallback language. When enabled, the sales channel default language will be used as fallback language first.","useSystemLanguagesLabel":"Use system languages","useSystemLanguagesHelpText":"By default the defined languages in the sales channel will be used. When enabled, the system languages will be used when exporting the catalog to EffectConnect.","stockTypeHelpText":"Determines which stock to use when building the exports.","stockTypeLabel":"Stock type","stockTypes":{"physicalStock":"Physical stock","salableStock":"Saleable stock"},"paymentStatusLabel":"Payment status","paymentStatusHelpText":"Select the payment status for imported orders.","paymentStatuses":{"paid":"Paid","open":"Open"},"orderStatusLabel":"Order status","orderStatusHelpText":"Select the order status for imported orders.","orderStatuses":{"open":"Open","in_progress":"In progress"},"customerSourceTypes":{"shipping":"Shipping","billing":"Billing"},"shippingStatuses":{"shipped":"Shipped","open":"Open","partially_shipped":"Partially shipped"},"shippingStatusLabel":"Shipping status","shippingStatusHelpText":"Select the shipping status for imported orders.","createCustomerLabel":"Create customers?","createCustomerHelpText":"Whether to create customers on order import","customerGroupLabel":"Customer group","customerGroupHelpText":"Which customer group newly created customers belong to","customerSourceTypeLabel":"Customer source type","customerSourceTypeHelpText":"Which address source newly created customers get their information from","importExternallyFulfilledOrdersLabel":"Import externally fulfilled orders?","importExternallyFulfilledOrdersHelpText":"Whether to import orders that are externally fulfilled.","externalPaymentStatusLabel":"Payment status (externally fulfilled order)","externalPaymentStatusHelpText":"Which payment status externally fulfilled orders will have.","externalOrderStatusLabel":"Order status (externally fulfilled order)","externalOrderStatusHelpText":"Which order status externally fulfilled orders will have.","externalShippingStatusLabel":"Shipping status (externally fulfilled order)","externalShippingStatusHelpText":"Which shipping status externally fulfilled orders will have.","paymentMethodHelpText":"Select the payment method for imported orders.","paymentMethodLabel":"Payment method","paymentMethodPlaceholder":"Choose a payment method...","shippingMethodHelpText":"Select the shipment method for imported orders.","shippingMethodLabel":"Shipment method","shippingMethodPlaceholder":"Choose a shipment method...","testCredentials":"Test API credentials","apiCredentialsOK":"Credentials valid","apiCredentialsNOK":"Credentials are not valid","triggerCatalogExport":"Trigger catalog export"}}}}');Shopware.Component.register("effectconnect-connection-overview",{inject:["EffectConnectConnectionService"],data(){return{connections:[],error:null,columns:[{property:"id",visible:!1},{property:"name",label:"Name"},{property:"salesChannelReference",label:"Sales channel"}],showModal:!1,selectedItem:null}},created(){this.refresh()},methods:{tc(e){return this.$tc("ec.connection.overview."+e)},refresh(){this.connections=[],this.EffectConnectConnectionService.getAll().then(e=>{for(let t of e.connections)this.connections.push(t)})},showDeleteModal(e){this.showModal=!0,this.selectedItem=e},closeDeleteModal(){this.showModal=!1,this.selectedItem=null},deleteItem(e){this.EffectConnectConnectionService.delete(e).then(()=>{this.closeDeleteModal(),this.refresh()})},handleError(e){this.error=e,setTimeout(()=>this.error=null,3e3)}},template:'{% block connection_overview %}\n    <sw-page class="connection-overview-list">\n        <template #smart-bar-actions>\n            <sw-button variant="success" :router-link="{ name: \'effectconnect.connection.create\'}">\n                {{ $tc(\'ec.global.create\') }}\n            </sw-button>\n        </template>\n        <template v-slot:content>\n            <sw-alert variant="error" appearance="system" :showIcon="true" :closable="false" v-if="error">\n                {{ error }}\n            </sw-alert>\n            <div>\n                <sw-data-grid :dataSource="connections" :columns="columns" :showSelection="false">\n                    <template v-slot:actions="{ item }">\n                        <sw-context-menu-item :router-link="{ name: \'effectconnect.connection.edit\', params: { id: item.id } }">\n                            {{ $tc(\'ec.global.edit\') }}\n                        </sw-context-menu-item>\n                        <sw-context-menu-item variant="danger" @click="showDeleteModal(item)">\n                            {{ tc(\'deleteConnection\') }}\n                        </sw-context-menu-item>\n                    </template>\n                </sw-data-grid>\n            </div>\n            <sw-modal v-if="showModal" @modal-close="closeModal()">\n                {% block ec_detail_settings_options_delete_modal_confirmtext %}\n                    <p>{{ tc(\'textConfirmDelete\') }}</p>\n                    <p><strong>{{ selectedItem.name }}</strong></p>\n                    <p>{{ tc(\'textDeleteInfo\') }}</p>\n                {% endblock %}\n                <template #modal-footer>\n                    <sw-button size="small" @click="closeDeleteModal">\n                        {{ $tc(\'ec.global.cancel\') }}\n                    </sw-button>\n                    <sw-button size="small" variant="danger" @click="deleteItem(selectedItem.id)">\n                        {{ $tc(\'ec.global.delete\') }}\n                    </sw-button>\n                </template>\n            </sw-modal>\n        </template>\n    </sw-page>\n{% endblock %}'});let{Mixin:o}=Shopware;class r{constructor(e,t,n){this.text=e,this.onConfirm=t,this.onCancel=n}}Shopware.Component.register("effectconnect-connection-edit",{inject:["EffectConnectConnectionService","EffectConnectTaskService"],data(){return{toasts:[],modal:null,loaded:!1,busySaving:!1,id:this.$route.params.id,newItem:!1,salesChannels:[],availableSalesChannels:[],connection:null,schedules:[],stockTypes:[],paymentStatuses:[],orderStatuses:[],customerSourceTypes:[],shippingStatuses:[]}},mixins:[o.getByName("notification")],created(){this.loaded=!1,this.EffectConnectConnectionService.getSalesChannelData().then(e=>{this.initConnection(e).then(()=>{this.EffectConnectConnectionService.getOptions().then(e=>{e=e.data,this.schedules=this._toOptions("schedules",e.schedules),this.stockTypes=this._toOptions("stockTypes",e.stockTypes),this.paymentStatuses=this._toOptions("paymentStatuses",e.payment),this.orderStatuses=this._toOptions("orderStatuses",e.order),this.customerSourceTypes=this._toOptions("customerSourceTypes",e.customerSourceTypes),this.shippingStatuses=this._toOptions("shippingStatuses",e.shipping),this.loaded=!0})})}).catch(e=>this.handleError(e))},methods:{save(){let e={name:"Name",salesChannelId:"Sales channel"};for(let t of Object.keys(e))if(!this.connection[t]){this.handleError(e[t]+" is required.");return}this.busySaving=!0,this.EffectConnectConnectionService.save(this.connection).then(e=>{this.newItem?(this.$router.push({name:"effectconnect.connection.edit",params:{id:e.id}}),window.location.reload()):this.createNotificationSuccess({message:this.$tc("ec.global.successSaved")})}).catch(e=>this.handleError(e)).finally(()=>this.busySaving=!1)},initConnection(e){return this.id?this.EffectConnectConnectionService.get(this.id).then(t=>{this.connection=t.connection,this.availableSalesChannels=e.data.filter(e=>e.value===this.connection.salesChannelId)}).catch(e=>this.handleError(e)):(this.newItem=!0,this.availableSalesChannels=e.data,this.EffectConnectConnectionService.getDefaultSettings().then(e=>{this.connection=e.data}).catch(e=>this.handleError(e)))},triggerCatalogExport(){this.modal=new r("Are you sure you want to trigger this process?",()=>{this.createNotificationSuccess({message:this.tc("taskTriggered")}),this.EffectConnectTaskService.trigger(this.connection.salesChannelId,"catalog"),this.modal=null},()=>{this.modal=null})},testApiCredentials(){return this.EffectConnectConnectionService.testApiCredentials(this.connection.publicKey,this.connection.secretKey).then(e=>{e.valid?this.createNotificationSuccess({message:this.tc("apiCredentialsOK")}):this.createNotificationError({message:this.tc("apiCredentialsNOK")})}).catch(e=>this.handleError(e))},handleError(e){this.createNotificationError({message:e})},tc(e){return this.$tc("ec.connection.edit."+e)},_toOption(e,t){return{value:t,label:this.tc(e+"."+t)}},_toOptions(e,t){return t.map(t=>this._toOption(e,t))}},template:'{% block connection_edit %}\n    <sw-page class="connection-edit">\n        <template #smart-bar-actions>\n            <sw-button @click="save()" :disabled="busySaving || !loaded" variant="primary" >\n                {{ $tc(\'ec.global.save\') }}\n            </sw-button>\n        </template>\n        <template #smart-bar-back>\n            <router-link class="smart-bar__back-btn" :to="{ name: \'effectconnect.connection.overview\' }">\n                <sw-icon name="regular-chevron-left-s" small />\n            </router-link>\n        </template>\n        <template #content>\n            <sw-loader v-if="busySaving"></sw-loader>\n            <div v-if="loaded">\n                <br><br>\n                <sw-card :title="tc(\'general\')">\n                    <sw-inherit-wrapper :helpText="tc(\'salesChannelHelpText\')" :label="tc(\'salesChannelLabel\')">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'salesChannelPlaceholder\')"\n                                    :disabled="!newItem"\n                                    :options="availableSalesChannels"\n                                    :value="connection.salesChannelId" @update:value="connection.salesChannelId = $event"\n                            >\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'nameHelpText\')" :label="tc(\'nameLabel\')">\n                        <template v-slot:content>\n                            <sw-text-field :value="connection.name" @update:value="connection.name = $event" :placeholder="tc(\'namePlaceholder\')"></sw-text-field>\n                        </template> {# }v-model="connection.name"#}\n                    </sw-inherit-wrapper>\n                </sw-card>\n                <sw-card :title="tc(\'api\')">\n                    <sw-inherit-wrapper :helpText="tc(\'publicKeyHelpText\')" :label="tc(\'publicKeyLabel\')">\n                        <template v-slot:content>\n                            <sw-text-field type="input" :placeholder="tc(\'publicKeyPlaceholder\')" :value="connection.publicKey" @update:value="connection.publicKey = $event"></sw-text-field>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'secretKeyHelpText\')" :label="tc(\'secretKeyLabel\')">\n                        <template v-slot:content>\n                            <sw-text-field type="password" :placeholder="tc(\'secretKeyPlaceholder\')" :value="connection.secretKey" @update:value="connection.secretKey = $event"></sw-text-field>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-button :disabled="!connection.secretKey || !connection.publicKey" @click="testApiCredentials()" size="small">\n                        <sw-icon name="regular-check-circle" small />\n                        {{ tc(\'testCredentials\') }}\n                    </sw-button>\n                </sw-card>\n                <sw-card :title="tc(\'catalogExport\')">\n                    <sw-label>\n                        <div v-html="$tc(\'ec.connection.edit.scheduleInformationText\', 0, {current: tc(\'schedules.\' + connection.catalogExportSchedule)})"></div>\n                    </sw-label>\n                    <br>\n                    <sw-switch-field bordered\n                                     :value="connection.addLeadingZeroToEan" @update:value="connection.addLeadingZeroToEan = $event"\n                                     :label="tc(\'addLeadingZeroToEanLabel\')"\n                                     :helpText="tc(\'addLeadingZeroToEanHelpText\')">\n                    </sw-switch-field>\n                    <sw-switch-field bordered\n                                     :value="connection.useSpecialPrice" @update:value="connection.useSpecialPrice = $event"\n                                     :label="tc(\'useSpecialPriceLabel\')"\n                                     :helpText="tc(\'useSpecialPriceHelpText\')">\n                    </sw-switch-field>\n                    <sw-switch-field bordered\n                                     :value="connection.useFallbackTranslations" @update:value="connection.useFallbackTranslations = $event"\n                                     :label="tc(\'useFallbackTranslationsLabel\')"\n                                     :helpText="tc(\'useFallbackTranslationsHelpText\')">\n                    </sw-switch-field>\n                    <sw-switch-field bordered\n                                     :value="connection.useSalesChannelDefaultLanguageAsFirstFallbackLanguage" @update:value="connection.useSalesChannelDefaultLanguageAsFirstFallbackLanguage = $event"\n                                     :label="tc(\'useSalesChannelDefaultLanguageAsFirstFallbackLanguageLabel\')"\n                                     :helpText="tc(\'useSalesChannelDefaultLanguageAsFirstFallbackLanguageHelpText\')">\n                    </sw-switch-field>\n                    <sw-switch-field bordered\n                                     :value="connection.useSystemLanguages" @update:value="connection.useSystemLanguages = $event"\n                                     :label="tc(\'useSystemLanguagesLabel\')"\n                                     :helpText="tc(\'useSystemLanguagesHelpText\')">\n                    </sw-switch-field>\n                    <sw-button :disabled="newItem" @click="triggerCatalogExport()" size="small">\n                        <sw-icon name="regular-rocket" small />\n                        {{ tc(\'triggerCatalogExport\') }}\n                    </sw-button>\n                </sw-card>\n                <sw-card :title="tc(\'offerExport\')">\n                    <sw-label>\n                        <div v-html="$tc(\'ec.connection.edit.scheduleInformationText\', 0, {current: tc(\'schedules.\' + connection.offerExportSchedule)})"></div>\n                    </sw-label>\n                    <br>\n                    <sw-inherit-wrapper :helpText="tc(\'stockTypeHelpText\')" :label="tc(\'stockTypeLabel\')">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'stockTypePlaceholder\')"\n                                    :options="stockTypes"\n                                    :value="connection.stockType" @update:value="connection.stockType = $event">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                </sw-card>\n                <sw-card :title="tc(\'orderImport\')">\n                    <sw-label>\n                        <div v-html="$tc(\'ec.connection.edit.scheduleInformationText\', 0, {current: tc(\'schedules.\' + connection.orderImportSchedule)})"></div>\n                    </sw-label>\n                    <br>\n                    <sw-inherit-wrapper :helpText="tc(\'orderStatusHelpText\')" :label="tc(\'orderStatusLabel\')">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'orderStatusPlaceholder\')"\n                                    :options="orderStatuses"\n                                    :value="connection.orderStatus" @update:value="connection.orderStatus = $event">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'paymentStatusHelpText\')" :label="tc(\'paymentStatusLabel\')">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'paymentStatusPlaceholder\')"\n                                    :options="paymentStatuses"\n                                    :value="connection.paymentStatus" @update:value="connection.paymentStatus = $event">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'paymentMethodHelpText\')" :label="tc(\'paymentMethodLabel\')">\n                        <template v-slot:content>\n                            <sw-entity-single-select\n                                    :placeHolder="tc(\'paymentMethodPlaceholder\')"\n                                    labelProperty="name"\n                                    valueProperty="id"\n                                    entity="payment_method"\n                                    v-model="connection.paymentMethod">\n                            </sw-entity-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'shippingMethodHelpText\')" :label="tc(\'shippingMethodLabel\')">\n                        <template v-slot:content>\n                            <sw-entity-single-select\n                                    :placeHolder="tc(\'shippingMethodPlaceholder\')"\n                                    labelProperty="name"\n                                    valueProperty="id"\n                                    entity="shipping_method"\n                                    v-model="connection.shippingMethod">\n                            </sw-entity-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-switch-field bordered v-model="connection.createCustomer"\n                                     :label="tc(\'createCustomerLabel\')"\n                                     :helpText="tc(\'createCustomerHelpText\')">\n                    </sw-switch-field>\n                    <sw-inherit-wrapper :helpText="tc(\'customerGroupHelpText\')" :label="tc(\'customerGroupLabel\')" v-show="connection.createCustomer">\n                        <template v-slot:content>\n                            <sw-entity-single-select\n                                    :placeHolder="tc(\'customerGroupPlaceholder\')"\n                                    labelProperty="name"\n                                    valueProperty="id"\n                                    entity="customer_group"\n                                    v-model="connection.customerGroup">\n                            </sw-entity-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'customerSourceTypeHelpText\')" :label="tc(\'customerSourceTypeLabel\')" v-show="connection.createCustomer">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'customerSourceTypePlaceholder\')"\n                                    :options="customerSourceTypes"\n                                    v-model="connection.customerSourceType">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-switch-field bordered v-model="connection.importExternallyFulfilledOrders"\n                                     :label="tc(\'importExternallyFulfilledOrdersLabel\')"\n                                     :helpText="tc(\'importExternallyFulfilledOrdersHelpText\')">\n                    </sw-switch-field>\n                    <sw-inherit-wrapper :helpText="tc(\'externalPaymentStatusHelpText\')" :label="tc(\'externalPaymentStatusLabel\')" v-show="connection.importExternallyFulfilledOrders">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'externalPaymentStatusPlaceholder\')"\n                                    :options="paymentStatuses"\n                                    v-model="connection.externalPaymentStatus">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'externalOrderStatusHelpText\')" :label="tc(\'externalOrderStatusLabel\')" v-show="connection.importExternallyFulfilledOrders">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'externalOrderStatusPlaceholder\')"\n                                    :options="orderStatuses"\n                                    :value="connection.externalOrderStatus" @update:value="connection.externalOrderStatus = $event">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                    <sw-inherit-wrapper :helpText="tc(\'externalShippingStatusHelpText\')" :label="tc(\'externalShippingStatusLabel\')" v-show="connection.importExternallyFulfilledOrders">\n                        <template v-slot:content>\n                            <sw-single-select\n                                    :placeholder="tc(\'externalShippingStatusPlaceholder\')"\n                                    :options="shippingStatuses"\n                                    :value="connection.externalShippingStatus" @update:value="connection.externalShippingStatus = $event">\n                            </sw-single-select>\n                        </template>\n                    </sw-inherit-wrapper>\n                </sw-card>\n            </div>\n            <sw-modal v-if="modal != null" @modal-close="modal.onCancel()">\n                <p>{{ modal.text }}</p>\n                <template v-slot:modal-footer>\n                    <sw-button size="small" @click="modal.onCancel()">\n                        {{ $tc(\'ec.global.cancel\') }}\n                    </sw-button>\n                    <sw-button size="small" variant="danger" @click="modal.onConfirm()">\n                        {{ $tc(\'ec.global.confirm\') }}\n                    </sw-button>\n                </template>\n            </sw-modal>\n        </template>\n    </sw-page>\n{% endblock %}'}),Shopware.Module.register("effectconnect-connection",{type:"plugin",name:"effectconnect-connection",title:"ec.global.modules.connection.title",description:"ec.global.modules.connection.description",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"default-action-settings",entity:"integration",snippets:{"nl-NL":a,"en-GB":s},routes:{overview:{component:"effectconnect-connection-overview",path:"overview"},edit:{component:"effectconnect-connection-edit",path:"edit/:id",meta:{parentPath:"effectconnect-connection.overview",parentRoute:"effectconnect-connection.overview"}},create:{component:"effectconnect-connection-edit",path:"create",meta:{parentPath:"effectconnect-connection.overview",parentRoute:"effectconnect-connection.overview"}}},navigation:[{id:"effectconnect-connection",label:"ec.global.modules.connection.label",color:"#ff3d58",path:"effectconnect.connection.overview",parent:"effectconnect-module",position:100}]});var i=JSON.parse('{"ec":{"log":{"overview":{"filename":"Bestandsnaam","lastUpdated":"Laatst bijgewerkt op","fullPath":"Bestandsnaam","download":"Downloaden"}}}}'),c=JSON.parse('{"ec":{"log":{"overview":{"filename":"Filename","lastUpdated":"Last updated at","fullPath":"Filename","download":"Download"}}}}');Shopware.Component.register("effectconnect-log-overview",{inject:["EffectConnectLogService"],data(){return{files:[],columns:[{property:"filename",label:this.tc("filename"),allowResize:!1},{property:"lastUpdated",label:this.tc("lastUpdated"),allowResize:!1},{property:"fullPath",label:this.tc("fullPath"),visible:!1},{property:"id",label:this.tc("id"),visible:!1}]}},created(){this.refresh()},methods:{tc(e){return this.$tc("ec.log.overview."+e)},refresh(){this.EffectConnectLogService.getAll().then(e=>{for(let t of e.files)this.files.push({id:t.path+"/"+t.filename,fullPath:t.path+"/"+t.filename,lastUpdated:new Date(1e3*t.lastUpdatedAt),filename:t.filename})})},shouldDisplayDownloadButton(){let e=this.$refs.logGrid;return(e?e.selectionCount:0)>1},downloadLogFile(e){let t=e.split("/"),n=t[t.length-1];this._downloadFiles(e,n)},downloadSelectedLogFiles(){let e=Object.values(this.$refs.logGrid.selection).map(e=>e.fullPath).join(",");this._downloadFiles(e,"EC-Logfiles "+new Date().toISOString()+".zip")},_downloadFiles(e,t){this.EffectConnectLogService.downloadFiles(e).then(e=>{let n=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.href=n,l.setAttribute("download",t),document.body.appendChild(l),l.click()})}},template:'{% block log_overview %}\n    <sw-page class="log-overview-list">\n        <template v-slot:smart-bar-actions>\n            <sw-button v-show="shouldDisplayDownloadButton()" variant="primary" @click="downloadSelectedLogFiles()">\n                {{ tc(\'download\') }}\n            </sw-button>\n        </template>\n        <template v-slot:content>\n            <div>\n                <sw-data-grid ref="logGrid" :dataSource="files" :columns="columns" :itemIdentifierProperty="\'fullPath\'">\n                    <template v-slot:actions="{ item }">\n                        <sw-context-menu-item @click="downloadLogFile(item.fullPath)">\n                            {{ tc(\'download\') }}\n                        </sw-context-menu-item>\n                    </template>\n                </sw-data-grid>\n            </div>\n        </template>\n    </sw-page>\n{% endblock %}'}),Shopware.Module.register("effectconnect-log",{type:"plugin",name:"effectconnect-log",title:"ec.global.modules.log.title",description:"ec.global.modules.log.description",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"default-action-settings",entity:"integration",snippets:{"nl-NL":i,"en-GB":c},routes:{overview:{component:"effectconnect-log-overview",path:"overview"}},navigation:[{id:"effectconnect-log",label:"ec.global.modules.log.label",color:"#ff3d58",path:"effectconnect.log.overview",parent:"effectconnect-module",position:100}]});let d=Shopware.Classes.ApiService;class p extends d{constructor(e,t,n){super(e,t,"ec/action"),this.category=n}_getBaseUri(){return"ec/action"+(this.category?"/"+this.category:"")}getUri(e,t){let n=this._getBaseUri()+"/"+e;return t?n+"?"+Object.entries(t).map(([e,t])=>`${e}=${t}`).join("&"):n}handleResponse(e){return d.handleResponse(e)}getData(e){let t=this.getBasicHeaders();return{...e,headers:t}}handlePromise(e){return e.then(e=>this.handleResponse(e))}getCall(e){return this.handlePromise(this.httpClient.get(this.getUri(e),this.getData({})))}postCall(e,t={}){return this.handlePromise(this.httpClient.post(this.getUri(e),t,this.getData({})))}}class u extends p{constructor(e,t){super(e,t,"connection")}getAll(){return this.getCall("getAll")}get(e){return this.getCall("get/"+e)}getSalesChannelData(){return this.getCall("getSalesChannelData")}getOptions(){return this.getCall("getOptions")}getDefaultSettings(){return this.getCall("getDefaultSettings")}delete(e){return this.postCall("delete/"+e)}save(e){return this.postCall("save",{connection:e})}testApiCredentials(e,t){return this.postCall("testApiCredentials",{publicKey:e,secretKey:t})}}class h extends p{constructor(e,t){super(e,t,"task")}trigger(e,t){return this.postCall("trigger/"+e+"/"+t)}}class g extends p{constructor(e,t){super(e,t,"log")}downloadFiles(e){return this.handlePromise(this.httpClient.get(this.getUri("downloadFiles",{filenames:e}),this.getData({responseType:"blob"})))}getAll(){return this.getCall("getAll")}}let{Application:m}=Shopware,f=m.getContainer("init");(function(){m.addServiceProvider("EffectConnectConnectionService",e=>new u(f.httpClient,e.loginService)),m.addServiceProvider("EffectConnectTaskService",e=>new h(f.httpClient,e.loginService)),m.addServiceProvider("EffectConnectLogService",e=>new g(f.httpClient,e.loginService))})()}()})();